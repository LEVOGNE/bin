#!/bin/bash

# ======================================================
# üéã ds - .DS_Store L√∂scher
# Autor: Levogne
# Version: 1.0
# Beschreibung: Dieses Skript l√∂scht alle .DS_Store-Dateien in einem Verzeichnis und dessen Unterverzeichnissen.
# Lizenz: MIT
# ======================================================

cleanup_dsstore() {
    local dir=${1:-.}
    local count=0

    # Z√§hle die Anzahl der .DS_Store-Dateien im Verzeichnis und seinen Unterverzeichnissen
    local total=$(find "$dir" -name ".DS_Store" | wc -l)
    echo "Gesamtanzahl der .DS_Store-Dateien zum L√∂schen: $total"

    if [ $total -eq 0 ]; then
        echo "Keine .DS_Store-Dateien gefunden."
        echo "Fertig!"
        return
    fi

    # Finde und l√∂sche alle .DS_Store-Dateien
    find "$dir" -name ".DS_Store" | while read -r file; do
        rm "$file"
        count=$((count + 1))
        # Zeige Fortschritt an
        echo -ne "\rGel√∂schte Dateien: $count von $total"
    done

    echo -ne "\nGel√∂schte .DS_Store-Dateien: $count\n"
    echo "Fertig!"
}

cleanup_dsstore "$1"

